<HTML>
<HEAD>
<TITLE> Speak Up </TITLE>
<script src="../js/app.js" lang="JavaScript"></script>
</HEAD>
<BODY>
<BODY BGCOLOR="D0f9f0">
<H2 style="font-family:arial black;"> Speak Up </H2>
<HR>
<button onclick="redirectTo('dashboard.html')">Back to Dashboard</button>
<SCRIPT LANGUAGE="JavaScript"> 
var suggestions;
isuggestions = new Array();
function main()
{
ViewPrivateSuggestions();
}
document.body.innerHTML = ''; //clears the page of all previous html elements
document.write("<h1>");
document.write("Private Suggestions");

function ViewPrivateSuggestions() //function to view private suggestions
{
var num;
num = 0;
isuggestions = localStorage.getItem('suggestions'); //load suggestions from local storage
isuggestions = JSON.parse(isuggestions); //parse the plan into a usable format for javascript
for (n=0;n<isuggestions.length;n++) //prints private sugestions individually by looping until it has looked at all suggestions
{
    if (!isuggestions[n].public) //prints everything if suggestion is private
    { 
        num++;
        document.write("<BR><h1>"); //mostly just layout stuff
        document.write(num+". "+isuggestions[n].title);
        document.write("<BR><h4>");
        document.write(isuggestions[n].text);
        document.write("<BR><h2>"+"Response");
        document.write("<BR><h4>");
        document.write(isuggestions[n].response);
        document.write('<BR><BUTTON value='+n+' onclick="reply(this.value)">'); //button calls reply() with value 'n' when clicked
        document.write(n);
        document.write('</BUTTON><BR>');
    }
}
}

function reply(num) //get a new reply and 'save' it. Called from reply button
{
var newResponse;
newResponse = prompt("Enter response.");
isuggestions[num].response = newResponse; //change response to inputted response
alert("Response accepted.");
save(); //saves so response persists when ViewPrivateSuggestions() is reloaded
ViewPrivateSuggestions(); //calls the function from within itself to reload the page
}

function save() //save suggestions to local storage
{
localStorage.clear(); //clears storage to ensure there are no double ups of saves
localStorage.setItem("suggestions", JSON.stringify(isuggestions)); //puts new suggestions into storage
alert("Saved.");
}    
main();</SCRIPT>
</BODY>
</HTML>



