<HTML>
<HEAD>
<TITLE> Speak Up </TITLE>
<SCRIPT LANGUAGE="JavaScript">
var suggestions;
suggestions = new Array();
function main()
{
Authentication();
LoadDashboard();
ViewPrivateSuggestions();
}

function Authentication()
{
return;
}

function LoadDashboard()
{
return;
}

function ViewPrivateSuggestions() //load all suggestions marked 'private' and make a page with buttons to respond
{
document.body.innerHTML = ''; //clears the page of all previous html elements
document.write("<h1>");
document.write("Private Suggestions");
var num;
num = 0;
suggestions = localStorage.getItem('suggestions'); //load suggestions from local storage
suggestions = JSON.parse(suggestions); //parse the plan into a usable format for javascript
for (n=0;n<suggestions.length;n++) //prints private sugestions individually by looping until it has looked at all suggestions
{
    if (!suggestions[n].Public) //prints everything if suggestion is private
    { 
        num++;
        document.write("<BR><h1>"); //mostly just layout stuff
        document.write(num+". "+suggestions[n].Title);
        document.write("<BR><h4>");
        document.write(suggestions[n].Text);
        document.write("<BR><h2>"+"Response");
        document.write("<BR><h4>");
        document.write(suggestions[n].Response);
        document.write('<BR><BUTTON value='+n+' onclick="reply(this.value)">'); //button calls reply() with value 'n' when clicked
        document.write(n);
        document.write('</BUTTON><BR>');
    }
}

}

function reply(num) //get a new reply and 'save' it. Called from reply button
{
var newResponse;
newResponse = prompt("Enter response.");
suggestions[num].Response = newResponse; //change response to inputted response
alert("Response accepted.");
save(); //saves so response persists when ViewPrivateSuggestions() is reloaded
ViewPrivateSuggestions(); //calls the function from within itself to reload the page
}

function save() //save suggestions to local storage
{
localStorage.clear(); //clears storage to ensure there are no double ups of saves
localStorage.setItem("suggestions", JSON.stringify(suggestions)); //puts new suggestions into storage
alert("Saved.");
}
</SCRIPT>
</HEAD>
<BODY>
<BODY BGCOLOR="D0f9f0">
<H2 style="font-family:arial black;"> Speak Up </H2>
<HR>
<SCRIPT LANGUAGE="JavaScript"> main();</SCRIPT>
</BODY>
</HTML>
